---
import Layout from '../layouts/Layout.astro';
import { Image } from 'astro:assets';
import { useTranslations } from '../i18n/utils';

// Images
import heroImg from '../assets/images/hero.webp'; // Hero base
import headBoneImg from '../assets/images/arch_camp.webp'; // Arqueología
import educationImg from '../assets/images/puntas_flecha.webp'; // Educación Card
import campImg from '../assets/images/camp.webp'; // Campamento Card

import logoAltea from '../assets/images/logo_altea.webp';
import logoUv from '../assets/images/logo_uv.webp';
import logoMupreva from '../assets/images/logo_mupreva.webp';

interface Props {
  lang: 'es' | 'en' | 'ca';
}

const { lang } = Astro.props;
const t = useTranslations(lang);

const localizePath = (path: string) => {
    if (lang === 'es') return path;
    const p = path.startsWith('/') ? path : `/${path}`;
    return `/${lang}${p}`;
};
---

<Layout
	title={`PedraTallada | ${t('hero.subtitle')}`}
	description={t('hero.desc')}
    useMainContainer={false}
>
	<!-- Split Hero Section -->
	<section class="relative min-h-[85svh] md:min-h-[90svh] flex flex-col md:flex-row bg-stone-900 overflow-hidden isolate">
        
        <!-- Background Image Cover -->
        <Image 
            src={heroImg} 
            alt="Pedra Tallada - Arqueología y Divulgación" 
            class="absolute inset-0 w-full h-full object-cover z-0"
            quality={80}
            format="webp"
            loading="eager"
        />

        <!-- Overlay Split Container -->
        <div class="absolute inset-0 z-10 flex flex-col md:flex-row">
            
            <!-- Left Half: Archaeology -->
            <a href={localizePath('/arqueologia')} class="flex-1 relative group flex flex-col items-center justify-center p-8 text-center outline-none focus-visible:ring-4 focus-visible:ring-clay-light focus-visible:ring-inset cursor-pointer no-underline text-stone-50">
                <div class="bg-stone-900/20 backdrop-blur-[2px] px-12 py-6 rounded-full mb-6 shadow-2xl transition-all duration-300">
                    <h1 class="text-4xl md:text-5xl lg:text-7xl font-serif leading-tight drop-shadow-[0_4px_8px_rgba(0,0,0,0.8)] group-hover:scale-[1.02] group-focus-visible:scale-[1.02] transition-transform duration-500 m-0">
                        {t('archaeology.title')}
                    </h1>
                </div>
                <span class="inline-block bg-white text-stone-900 px-8 py-3 rounded-full font-semibold shadow-lg shadow-black/20 group-hover:-translate-y-1 group-focus-visible:-translate-y-1 transition-transform duration-300">
                    {t('projects.read_more')}
                </span>
            </a>

            <!-- Right Half: Education/Outreach -->
            <a href={localizePath('/educacion')} class="flex-1 relative group flex flex-col items-center justify-center p-8 text-center outline-none focus-visible:ring-4 focus-visible:ring-clay-light focus-visible:ring-inset cursor-pointer no-underline text-stone-50">
                <div class="bg-stone-900/20 backdrop-blur-[2px] px-12 py-6 rounded-full mb-6 shadow-2xl transition-all duration-300">
                    <h1 class="text-4xl md:text-5xl lg:text-7xl font-serif leading-tight drop-shadow-[0_4px_8px_rgba(0,0,0,0.8)] group-hover:scale-[1.02] group-focus-visible:scale-[1.02] transition-transform duration-500 m-0">
                        {t('project.educacion.title')}
                    </h1>
                </div>
                <span class="inline-block bg-stone-100/90 backdrop-blur-sm text-stone-900 px-8 py-3 rounded-full font-semibold shadow-lg shadow-black/20 group-hover:-translate-y-1 group-focus-visible:-translate-y-1 transition-transform duration-300">
                    {t('projects.read_more')}
                </span>
            </a>

        </div>
	</section>

    <div class="container mx-auto px-4 py-8 md:py-12">
        <!-- Featured Grid -->
        <section id="proyectos" class="mb-16 mt-8 md:mt-16">
            <div class="flex justify-center items-end mb-8">
                <div class="text-center">
                    <h2 class="text-3xl font-serif text-stone-900 mb-2">Actividades Destacadas</h2>
                    <p class="text-stone-500 text-sm md:text-base">Servicios profesionales y educación</p>
                </div>
            </div>
            
            <div class="grid md:grid-cols-3 gap-8 max-w-7xl mx-auto">
                
                <!-- Card 1: Servicios Arqueología -->
                 <a href={localizePath('/arqueologia')} class="bg-white rounded-xl overflow-hidden border border-stone-100 shadow-sm hover:shadow-xl hover:shadow-stone-200/50 transition-all duration-300 group flex flex-col h-full cursor-pointer">
                    <div class="relative overflow-hidden aspect-video">
                        <Image 
                            src={headBoneImg} 
                            alt="Servicios Arqueología"
                            class="w-full h-full object-cover transform group-hover:scale-105 transition-transform duration-700"
                            width={800}
                            height={500}
                            format="webp"
                            quality={80}
                        />
                        <div class="absolute top-4 left-4 bg-stone-600 text-white text-xs font-bold px-3 py-1 rounded-full uppercase tracking-wide shadow-md">
                            Servicios
                        </div>
                    </div>
                    
                    <div class="p-6 flex flex-col flex-1">
                        <h3 class="text-2xl font-serif font-bold text-stone-900 mb-3 group-hover:text-clay-dark transition-colors">
                            {t('archaeology.title')}
                        </h3>
                        <p class="text-stone-600 mb-6 text-base leading-relaxed grow">
                            {t('archaeology.intro')}
                        </p>
                        <span class="text-clay-dark font-medium group-hover:underline flex items-center gap-2">
                            {t('projects.read_more')} 
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"/></svg>
                        </span>
                    </div>
                </a>

                <!-- Card 2: Talleres Educativos -->
                <a href={localizePath('/educacion')} class="bg-white rounded-xl overflow-hidden border border-stone-100 shadow-sm hover:shadow-xl hover:shadow-stone-200/50 transition-all duration-300 group flex flex-col h-full cursor-pointer">
                    <div class="relative overflow-hidden aspect-video">
                        <Image 
                            src={educationImg} 
                            alt="Talleres Educativos"
                            class="w-full h-full object-cover transform group-hover:scale-105 transition-transform duration-700"
                            width={800}
                            height={500}
                            format="webp"
                            quality={80}
                        />
                        <div class="absolute top-4 left-4 bg-stone-600 text-white text-xs font-bold px-3 py-1 rounded-full uppercase tracking-wide shadow-md">
                            Divulgación
                        </div>
                    </div>
                    
                    <div class="p-6 flex flex-col flex-1">
                        <h3 class="text-2xl font-serif font-bold text-stone-900 mb-3 group-hover:text-clay-dark transition-colors">
                            {t('project.educacion.title')}
                        </h3>
                        <p class="text-stone-600 mb-6 text-base leading-relaxed grow">
                            {t('project.educacion.desc')}
                        </p>
                        <span class="text-clay-dark font-medium group-hover:underline flex items-center gap-2">
                             {t('projects.read_more')}
                             <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"/></svg>
                        </span>
                    </div>
                </a>

                <!-- Card 3: Campamento -->
                <a href={localizePath('/campamento-arqueologia')} class="bg-white rounded-xl overflow-hidden border border-stone-100 shadow-sm hover:shadow-xl hover:shadow-stone-200/50 transition-all duration-300 group flex flex-col h-full cursor-pointer">
                    <div class="relative overflow-hidden aspect-video">
                        <Image 
                            src={campImg} 
                            alt="Campamento Arqueología"
                            class="w-full h-full object-cover transform group-hover:scale-105 transition-transform duration-700"
                            width={800}
                            height={500}
                            format="webp"
                            quality={80}
                        />
                        <div class="absolute top-4 left-4 bg-stone-600 text-white text-xs font-bold px-3 py-1 rounded-full uppercase tracking-wide shadow-md">
                            Campamento
                        </div>
                    </div>
                    
                    <div class="p-6 flex flex-col flex-1">
                        <h3 class="text-2xl font-serif font-bold text-stone-900 mb-3 group-hover:text-clay-dark transition-colors">
                            {t('project.campamento-arqueologia.title')}
                        </h3>
                        <p class="text-stone-600 mb-6 text-base leading-relaxed grow">
                            {t('project.campamento-arqueologia.desc')}
                        </p>
                        <span class="text-clay-dark font-medium group-hover:underline flex items-center gap-2">
                             {t('projects.read_more')}
                             <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"/></svg>
                        </span>
                    </div>
                </a>

            </div>
        </section>

        <!-- Collaborators Section -->
        <section class="mb-16 md:mb-24">
            <div class="text-center mb-10">
                <h2 class="text-2xl md:text-3xl font-serif text-stone-900 mb-2">{t('collaborators.title')}</h2>
                <div class="h-1 w-20 bg-clay-dark mx-auto rounded-full"></div>
            </div>
            
            <div class="flex flex-wrap justify-center items-center gap-12 md:gap-20 grayscale hover:grayscale-0 transition-all duration-500 opacity-70 hover:opacity-100">
                <Image src={logoAltea} alt="Ayuntamiento de Altea" class="h-16 md:h-20 w-auto object-contain" />
                <Image src={logoUv} alt="Universidad de Valencia" class="h-16 md:h-20 w-auto object-contain" />
                <Image src={logoMupreva} alt="Museo de Prehistoria de Valencia" class="h-16 md:h-20 w-auto object-contain" />
            </div>
        </section>

        <!-- Call to Action -->
        <section class="bg-stone-900 rounded-3xl p-8 md:p-12 text-center text-stone-100 mb-16 relative overflow-hidden isolate">
            <!-- Abstract decorative shape -->
            <div class="absolute top-0 right-0 -mt-20 -mr-20 w-80 h-80 bg-clay-dark/20 rounded-full blur-3xl -z-10"></div>
            <div class="absolute bottom-0 left-0 -mb-20 -ml-20 w-80 h-80 bg-moss-dark/20 rounded-full blur-3xl -z-10"></div>
            
            <h2 class="text-3xl md:text-4xl font-serif mb-6">{t('contact.subtitle')}</h2>
            <p class="text-stone-300 max-w-2xl mx-auto mb-8 text-lg">
                {t('contact.desc')}
            </p>
            <a href={localizePath('/contacto')} class="inline-block bg-white text-stone-900 px-8 py-3 rounded-full font-bold hover:bg-stone-200 transition-colors">
                {t('hero.cta_contact')}
            </a>
        </section>
    </div>
</Layout>


